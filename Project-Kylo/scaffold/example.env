DATABASE_URL=postgresql+psycopg2://postgres:postgres@localhost:5432/remodel
GOOGLE_APPLICATION_CREDENTIALS=D:\\secrets\\service-account.json
API_KEY=local-dev-key
# Optional Plaid
# PLAID_CLIENT_ID=
# PLAID_SECRET=
# PLAID_ENV=sandbox


# Kylo Remodel namespaced configuration (KYLO_*)

# Core Database
# Admin/global DSN (applies DDLs, seeds control tables)
KYLO_DB_DSN_GLOBAL=postgresql://postgres:postgres@localhost:5432/kylo_global
# JSON map of {"company_id": "dsn"}; used to resolve company connections
# Example: {"company_a":"postgresql://postgres:postgres@localhost:5432/kylo_company_a"}
KYLO_DB_DSN_MAP=
# Max pooled connections per worker (reserved; not used in scaffold runner)
KYLO_DB_CONN_POOL_SIZE=10
# Seconds before connection attempts time out
KYLO_DB_CONN_TIMEOUT=30

# Mover Service
# Row count threshold to switch to COPY path
KYLO_MOVER_COPY_THRESHOLD=5000
# Max retries on transient connection errors
KYLO_MOVER_RETRY_MAX=3
# Initial backoff in milliseconds for retries
KYLO_MOVER_RETRY_BASE_MS=200
# Logging level for mover (e.g., INFO, DEBUG)
KYLO_MOVER_LOG_LEVEL=INFO
# Optional fixed UUID for test runs (normally auto-generated); leave empty to auto-generate
KYLO_MOVER_RUN_ID=

# Outbox / Events
# Event topic for rules snapshot (current default rules.updated kept by code for compatibility)
KYLO_OUTBOX_TOPIC_RULES_SNAPSHOT=rules.snapshot.v1
# Shared secret for event signing (not used in scaffold tests)
KYLO_OUTBOX_SIGNATURE_SECRET=
# Background relay interval in milliseconds (not used in scaffold tests)
KYLO_OUTBOX_PUBLISH_INTERVAL_MS=500

# Sheets Stub
# Path or secret name for Google service account JSON
KYLO_SHEETS_SA_SECRET_PATH=
# Whether to actually call Sheets API (stub defaults to true for dry run)
KYLO_SHEETS_DRY_RUN=true
# Max allowed API calls per run/test (stub)
KYLO_SHEETS_QUOTA_BUDGET=0

# n8n
# Incoming webhook URL for mover
KYLO_N8N_MOVER_URL=
# Shared secret header value (X-Signature)
KYLO_N8N_SIGNATURE_SECRET=
# Request timeout in seconds
KYLO_N8N_TIMEOUT=15

# CI / Test
# DSN used by pytest containers or CI
KYLO_TEST_DB_DSN=postgresql://postgres:postgres@localhost:5432/app
# Postgres version for CI containers
KYLO_TEST_PG_VERSION=16
# Path to fixture SQLs (if used by CI)
KYLO_TEST_SEED_FIXTURES=scaffold/tests/mover/fixtures.sql

